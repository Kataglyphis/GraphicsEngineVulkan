\doxysection{Vulkan\+Debug.\+cpp}
\label{_vulkan_debug_8cpp_source}\index{C:/Users/jonas/Desktop/GraphicsEngineVulkan/Src/vulkan\_base/VulkanDebug.cpp@{C:/Users/jonas/Desktop/GraphicsEngineVulkan/Src/vulkan\_base/VulkanDebug.cpp}}
\mbox{\hyperlink{_vulkan_debug_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001 \textcolor{preprocessor}{\#include "{}VulkanDebug.h"{}}}
\DoxyCodeLine{00002 }
\DoxyCodeLine{00003 \textcolor{preprocessor}{\#include "{}Utilities.h"{}}}
\DoxyCodeLine{00004 }
\DoxyCodeLine{00005 \textcolor{keyword}{namespace }debug \{}
\DoxyCodeLine{00006 PFN\_vkCreateDebugUtilsMessengerEXT vkCreateDebugUtilsMessengerEXT;}
\DoxyCodeLine{00007 PFN\_vkDestroyDebugUtilsMessengerEXT vkDestroyDebugUtilsMessengerEXT;}
\DoxyCodeLine{00008 VkDebugUtilsMessengerEXT debugUtilsMessenger;}
\DoxyCodeLine{00009 }
\DoxyCodeLine{00010 VKAPI\_ATTR VkBool32 VKAPI\_CALL debugUtilsMessengerCallback(}
\DoxyCodeLine{00011     VkDebugUtilsMessageSeverityFlagBitsEXT messageSeverity,}
\DoxyCodeLine{00012     VkDebugUtilsMessageTypeFlagsEXT messageType,}
\DoxyCodeLine{00013     \textcolor{keyword}{const} VkDebugUtilsMessengerCallbackDataEXT* pCallbackData,}
\DoxyCodeLine{00014     \textcolor{keywordtype}{void}* pUserData) \{}
\DoxyCodeLine{00015   \textcolor{comment}{// Select prefix depending on flags passed to the callback}}
\DoxyCodeLine{00016   std::string prefix(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00017 }
\DoxyCodeLine{00018   \textcolor{keywordflow}{if} (messageSeverity \& VK\_DEBUG\_UTILS\_MESSAGE\_SEVERITY\_VERBOSE\_BIT\_EXT) \{}
\DoxyCodeLine{00019     prefix = \textcolor{stringliteral}{"{}VERBOSE: "{}};}
\DoxyCodeLine{00020   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (messageSeverity \& VK\_DEBUG\_UTILS\_MESSAGE\_SEVERITY\_INFO\_BIT\_EXT) \{}
\DoxyCodeLine{00021     prefix = \textcolor{stringliteral}{"{}INFO: "{}};}
\DoxyCodeLine{00022   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (messageSeverity \&}
\DoxyCodeLine{00023              VK\_DEBUG\_UTILS\_MESSAGE\_SEVERITY\_WARNING\_BIT\_EXT) \{}
\DoxyCodeLine{00024     prefix = \textcolor{stringliteral}{"{}WARNING: "{}};}
\DoxyCodeLine{00025   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (messageSeverity \& VK\_DEBUG\_UTILS\_MESSAGE\_SEVERITY\_ERROR\_BIT\_EXT) \{}
\DoxyCodeLine{00026     prefix = \textcolor{stringliteral}{"{}ERROR: "{}};}
\DoxyCodeLine{00027   \}}
\DoxyCodeLine{00028 }
\DoxyCodeLine{00029   \textcolor{comment}{// Display message to default output (console/logcat)}}
\DoxyCodeLine{00030   std::stringstream debugMessage;}
\DoxyCodeLine{00031   debugMessage << prefix << \textcolor{stringliteral}{"{}["{}} << pCallbackData-\/>messageIdNumber << \textcolor{stringliteral}{"{}]["{}}}
\DoxyCodeLine{00032                << pCallbackData-\/>pMessageIdName}
\DoxyCodeLine{00033                << \textcolor{stringliteral}{"{}] : "{}} << pCallbackData-\/>pMessage;}
\DoxyCodeLine{00034 }
\DoxyCodeLine{00035 \textcolor{preprocessor}{\#if defined(\_\_ANDROID\_\_)}}
\DoxyCodeLine{00036   \textcolor{keywordflow}{if} (messageSeverity >= VK\_DEBUG\_UTILS\_MESSAGE\_SEVERITY\_ERROR\_BIT\_EXT) \{}
\DoxyCodeLine{00037     LOGE(\textcolor{stringliteral}{"{}\%s"{}}, debugMessage.str().c\_str());}
\DoxyCodeLine{00038   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00039     LOGD(\textcolor{stringliteral}{"{}\%s"{}}, debugMessage.str().c\_str());}
\DoxyCodeLine{00040   \}}
\DoxyCodeLine{00041 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00042   \textcolor{keywordflow}{if} (messageSeverity >= VK\_DEBUG\_UTILS\_MESSAGE\_SEVERITY\_ERROR\_BIT\_EXT) \{}
\DoxyCodeLine{00043     std::cerr << debugMessage.str() << \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00044   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00045     std::cout << debugMessage.str() << \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00046   \}}
\DoxyCodeLine{00047   fflush(stdout);}
\DoxyCodeLine{00048 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00049 }
\DoxyCodeLine{00050   \textcolor{comment}{// The return value of this callback controls whether the Vulkan call that}}
\DoxyCodeLine{00051   \textcolor{comment}{// caused the validation message will be aborted or not We return VK\_FALSE as}}
\DoxyCodeLine{00052   \textcolor{comment}{// we DON'T want Vulkan calls that cause a validation message to abort If you}}
\DoxyCodeLine{00053   \textcolor{comment}{// instead want to have calls abort, pass in VK\_TRUE and the function will}}
\DoxyCodeLine{00054   \textcolor{comment}{// return VK\_ERROR\_VALIDATION\_FAILED\_EXT}}
\DoxyCodeLine{00055   \textcolor{keywordflow}{return} VK\_FALSE;}
\DoxyCodeLine{00056 \}}
\DoxyCodeLine{00057 }
\DoxyCodeLine{00058 \textcolor{keywordtype}{void} setupDebugging(VkInstance instance, VkDebugReportFlagsEXT flags,}
\DoxyCodeLine{00059                     VkDebugReportCallbackEXT callBack) \{}
\DoxyCodeLine{00060   vkCreateDebugUtilsMessengerEXT =}
\DoxyCodeLine{00061       \textcolor{keyword}{reinterpret\_cast<}PFN\_vkCreateDebugUtilsMessengerEXT\textcolor{keyword}{>}(}
\DoxyCodeLine{00062           vkGetInstanceProcAddr(instance, \textcolor{stringliteral}{"{}vkCreateDebugUtilsMessengerEXT"{}}));}
\DoxyCodeLine{00063   vkDestroyDebugUtilsMessengerEXT =}
\DoxyCodeLine{00064       \textcolor{keyword}{reinterpret\_cast<}PFN\_vkDestroyDebugUtilsMessengerEXT\textcolor{keyword}{>}(}
\DoxyCodeLine{00065           vkGetInstanceProcAddr(instance, \textcolor{stringliteral}{"{}vkDestroyDebugUtilsMessengerEXT"{}}));}
\DoxyCodeLine{00066 }
\DoxyCodeLine{00067   VkDebugUtilsMessengerCreateInfoEXT debugUtilsMessengerCI\{\};}
\DoxyCodeLine{00068   debugUtilsMessengerCI.sType =}
\DoxyCodeLine{00069       VK\_STRUCTURE\_TYPE\_DEBUG\_UTILS\_MESSENGER\_CREATE\_INFO\_EXT;}
\DoxyCodeLine{00070   debugUtilsMessengerCI.messageSeverity =}
\DoxyCodeLine{00071       VK\_DEBUG\_UTILS\_MESSAGE\_SEVERITY\_WARNING\_BIT\_EXT |}
\DoxyCodeLine{00072       VK\_DEBUG\_UTILS\_MESSAGE\_SEVERITY\_ERROR\_BIT\_EXT;}
\DoxyCodeLine{00073   debugUtilsMessengerCI.messageType =}
\DoxyCodeLine{00074       VK\_DEBUG\_UTILS\_MESSAGE\_TYPE\_GENERAL\_BIT\_EXT |}
\DoxyCodeLine{00075       VK\_DEBUG\_UTILS\_MESSAGE\_TYPE\_VALIDATION\_BIT\_EXT;}
\DoxyCodeLine{00076   debugUtilsMessengerCI.pfnUserCallback = debugUtilsMessengerCallback;}
\DoxyCodeLine{00077   ASSERT\_VULKAN(vkCreateDebugUtilsMessengerEXT(instance, \&debugUtilsMessengerCI,}
\DoxyCodeLine{00078                                                \textcolor{keyword}{nullptr}, \&debugUtilsMessenger),}
\DoxyCodeLine{00079                 \textcolor{stringliteral}{"{}Failed to create debug messenger"{}})}
\DoxyCodeLine{00080 \}}
\DoxyCodeLine{00081 }
\DoxyCodeLine{00082 \textcolor{keywordtype}{void} freeDebugCallback(VkInstance instance) \{}
\DoxyCodeLine{00083   \textcolor{keywordflow}{if} (debugUtilsMessenger != VK\_NULL\_HANDLE) \{}
\DoxyCodeLine{00084     vkDestroyDebugUtilsMessengerEXT(instance, debugUtilsMessenger, \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00085   \}}
\DoxyCodeLine{00086 \}}
\DoxyCodeLine{00087 \}  \textcolor{comment}{// namespace debug}}

\end{DoxyCode}
